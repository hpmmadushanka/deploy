(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{zrcO:function(e,t,i){"use strict";i.r(t),i.d(t,"UsersModule",(function(){return I}));var n=i("3Pt+"),r=i("ofXK"),s=i("tyNb"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Lb({type:e,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(e,t){1&e&&(o.Xb(0,"div",0),o.Xb(1,"div",1),o.Sb(2,"router-outlet"),o.Wb(),o.Wb())},directives:[s.g],encapsulation:2}),e})();var b=i("SxV6"),c=i("J9tS");function l(e,t){1&e&&o.Sb(0,"span",10)}function u(e,t){1&e&&(o.Xb(0,"span"),o.Dc(1,"Delete"),o.Wb())}function d(e,t){if(1&e){const e=o.Yb();o.Xb(0,"tr"),o.Xb(1,"td"),o.Dc(2),o.Wb(),o.Xb(3,"td"),o.Dc(4),o.Wb(),o.Xb(5,"td"),o.Dc(6),o.Wb(),o.Xb(7,"td",7),o.Xb(8,"button",8),o.fc("click",(function(){o.uc(e);const i=t.$implicit;return o.ic().deleteUser(i.email)})),o.Bc(9,l,1,0,"span",9),o.Bc(10,u,2,0,"span",6),o.Wb(),o.Wb(),o.Wb()}if(2&e){const e=t.$implicit;o.Eb(2),o.Ec(e.email),o.Eb(2),o.Ec(e.role),o.Eb(2),o.Ec(e.countryName),o.Eb(2),o.lc("disabled",e.isDeleting),o.Eb(1),o.lc("ngIf",e.isDeleting),o.Eb(1),o.lc("ngIf",!e.isDeleting)}}function p(e,t){1&e&&(o.Xb(0,"tr"),o.Xb(1,"td",11),o.Sb(2,"span",12),o.Wb(),o.Wb())}let f=(()=>{class e{constructor(e){this.accountService=e,this.users=null}ngOnInit(){this.accountService.getAllUsers().pipe(Object(b.a)()).subscribe(e=>this.users=e)}deleteUser(e){this.users.find(t=>t.email===e),this.accountService.delete(e).pipe(Object(b.a)()).subscribe(()=>{this.users=this.users.filter(t=>t.email!==e)})}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(c.a))},e.\u0275cmp=o.Lb({type:e,selectors:[["ng-component"]],decls:19,vars:2,consts:[["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","30%"],[2,"width","20%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-danger","btn-delete-user",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(e,t){1&e&&(o.Sb(0,"hr"),o.Xb(1,"h3"),o.Dc(2,"Users"),o.Wb(),o.Sb(3,"hr"),o.Xb(4,"a",0),o.Dc(5,"Add User"),o.Wb(),o.Xb(6,"table",1),o.Xb(7,"thead"),o.Xb(8,"tr"),o.Xb(9,"th",2),o.Dc(10,"Email"),o.Wb(),o.Xb(11,"th",3),o.Dc(12,"Account Type"),o.Wb(),o.Xb(13,"th",3),o.Dc(14,"Country"),o.Wb(),o.Sb(15,"th",4),o.Wb(),o.Wb(),o.Xb(16,"tbody"),o.Bc(17,d,11,6,"tr",5),o.Bc(18,p,3,0,"tr",6),o.Wb(),o.Wb()),2&e&&(o.Eb(17),o.lc("ngForOf",t.users),o.Eb(1),o.lc("ngIf",!t.users))},directives:[s.e,r.i,r.j],encapsulation:2}),e})();function m(e,t){1&e&&(o.Xb(0,"h1"),o.Dc(1,"Create User"),o.Wb())}function v(e,t){1&e&&(o.Xb(0,"h1"),o.Dc(1,"Edit User"),o.Wb())}function h(e,t){1&e&&(o.Xb(0,"div"),o.Dc(1,"Email is required"),o.Wb())}function X(e,t){if(1&e&&(o.Xb(0,"div",36),o.Bc(1,h,2,0,"div",0),o.Wb()),2&e){const e=o.ic();o.Eb(1),o.lc("ngIf",e.f.email.errors.required)}}function W(e,t){1&e&&o.Sb(0,"span",37)}const g=function(e){return{"is-invalid":e}};let D=(()=>{class e{constructor(e,t,i,n,r){this.formBuilder=e,this.route=t,this.router=i,this.accountService=n,this.alertService=r,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!0,this.countries=[{value:"Afghanistan",id:"AF"},{value:"Bangladesh",id:"BD"},{value:"Bhutan",id:"BT"},{value:"India",id:"IN"},{value:"Maldives",id:"MV"},{value:"Nepal",id:"NP"},{value:"Pakistan",id:"PK"},{value:"Sri Lanka",id:"LK"},{value:"Brunei",id:"BN"},{value:"Cambodia",id:"KH"},{value:"Indonesia",id:"ID"},{value:"Laos",id:"LA"},{value:"Malaysia",id:"MY"},{value:"Myanmar",id:"MM"},{value:"Philippines",id:"PH"},{value:"Singapore",id:"SG"},{value:"Thailand",id:"TH"},{value:"Vietnam",id:"VN"}];const e=[n.s.minLength(6)];this.isAddMode&&e.push(n.s.required),this.form=this.formBuilder.group({username:["",n.s.required],email:["",n.s.required],countryCode:["",n.s.required],role:["",n.s.required]})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.loading=!0,this.alertService.clear(),this.accountService.register(this.form.value).pipe(Object(b.a)()).subscribe(e=>{this.alertService.success("User added successfully",{keepAfterRouteChange:!0}),this.router.navigate([".",{relativeTo:this.route}])},e=>{this.alertService.error(e),this.loading=!1})}updateUser(){this.accountService.update(this.id,this.form.value).pipe(Object(b.a)()).subscribe(e=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["..",{relativeTo:this.route}])},e=>{this.alertService.error(e),this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(n.d),o.Rb(s.a),o.Rb(s.c),o.Rb(c.a),o.Rb(c.b))},e.\u0275cmp=o.Lb({type:e,selectors:[["ng-component"]],decls:69,vars:9,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col"],["for","email"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","status"],["formControlName","role",1,"custom-select"],["value","","disabled",""],["value","admin"],["value","normal"],["for","country"],["formControlName","countryCode",1,"custom-select"],["value","AF"],["value","BD"],["value","BT"],["value","IN"],["value","MV"],["value","NP"],["value","PK"],["value","LK"],["value","BN"],["value","KH"],["value","ID"],["value","LA"],["value","MY"],["value","MM"],["value","PH"],["value","SG"],["value","TH"],["value","VN"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/users",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&(o.Bc(0,m,2,0,"h1",0),o.Bc(1,v,2,0,"h1",0),o.Xb(2,"form",1),o.fc("ngSubmit",(function(){return t.onSubmit()})),o.Xb(3,"div",2),o.Xb(4,"div",3),o.Xb(5,"label",4),o.Dc(6,"Email"),o.Wb(),o.Sb(7,"input",5),o.Bc(8,X,2,1,"div",6),o.Wb(),o.Wb(),o.Xb(9,"div",2),o.Xb(10,"div",3),o.Xb(11,"label",7),o.Dc(12,"Account Type"),o.Wb(),o.Xb(13,"select",8),o.Xb(14,"option",9),o.Dc(15,"Choose account type"),o.Wb(),o.Xb(16,"option",10),o.Dc(17,"admin user"),o.Wb(),o.Xb(18,"option",11),o.Dc(19,"normal user"),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Xb(20,"div",2),o.Xb(21,"div",3),o.Xb(22,"label",12),o.Dc(23,"Country"),o.Wb(),o.Xb(24,"select",13),o.Xb(25,"option",9),o.Dc(26,"Choose country"),o.Wb(),o.Xb(27,"option",14),o.Dc(28,"Afghanistan"),o.Wb(),o.Xb(29,"option",15),o.Dc(30," Bangladesh"),o.Wb(),o.Xb(31,"option",16),o.Dc(32,"Bhutan"),o.Wb(),o.Xb(33,"option",17),o.Dc(34," India"),o.Wb(),o.Xb(35,"option",18),o.Dc(36,"Maldives"),o.Wb(),o.Xb(37,"option",19),o.Dc(38," Nepal"),o.Wb(),o.Xb(39,"option",20),o.Dc(40,"Pakistan"),o.Wb(),o.Xb(41,"option",21),o.Dc(42," Sri Lanka"),o.Wb(),o.Xb(43,"option",22),o.Dc(44,"Brunei"),o.Wb(),o.Xb(45,"option",23),o.Dc(46," Cambodia"),o.Wb(),o.Xb(47,"option",24),o.Dc(48," Indonesia"),o.Wb(),o.Xb(49,"option",25),o.Dc(50," Laos"),o.Wb(),o.Xb(51,"option",26),o.Dc(52," Malaysia"),o.Wb(),o.Xb(53,"option",27),o.Dc(54," Myanmar"),o.Wb(),o.Xb(55,"option",28),o.Dc(56," Philippines"),o.Wb(),o.Xb(57,"option",29),o.Dc(58," Singapore"),o.Wb(),o.Xb(59,"option",30),o.Dc(60," Thailand"),o.Wb(),o.Xb(61,"option",31),o.Dc(62," Vietnam"),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Xb(63,"div",32),o.Xb(64,"button",33),o.Bc(65,W,1,0,"span",34),o.Dc(66," Create User "),o.Wb(),o.Xb(67,"a",35),o.Dc(68,"Cancel"),o.Wb(),o.Wb(),o.Wb()),2&e&&(o.lc("ngIf",t.isAddMode),o.Eb(1),o.lc("ngIf",!t.isAddMode),o.Eb(1),o.lc("formGroup",t.form),o.Eb(5),o.lc("ngClass",o.oc(7,g,t.submitted&&t.f.email.errors)),o.Eb(1),o.lc("ngIf",t.submitted&&t.f.email.errors),o.Eb(56),o.lc("disabled",t.loading),o.Eb(1),o.lc("ngIf",t.loading))},directives:[r.j,n.u,n.m,n.f,n.b,n.l,n.e,r.h,n.r,n.p,n.t,s.e],encapsulation:2}),e})();const S=[{path:"",component:a,children:[{path:"",component:f},{path:"add",component:D},{path:"edit/:id",component:D}]}];let y=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},imports:[[s.f.forChild(S)],s.f]}),e})();var B=i("ZOsW");let I=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},imports:[[r.b,n.q,y,B.b]]}),e})()}}]);